import React, { useState } from 'react';
// O import do ReactDOM foi removido, pois a renderização agora é feita
// pelo ambiente hospedeiro, o que resolve erros de inicialização.

// Componente principal da aplicação
const App = () => {
  // Estado para armazenar a mensagem temporária
  const [message, setMessage] = useState('');
  // Estado para controlar a câmera ativa para a transmissão
  const [activeCamera, setActiveCamera] = useState(null);

  // Função para lidar com as ações das câmeras
  const handleCameraAction = (camera, action) => {
    let newMessage = '';
    switch (action) {
      case 'toggle':
        newMessage = `Câmera ${camera} foi ligada ou desligada.`;
        break;
      case 'record':
        newMessage = `Gravação iniciada na Câmera ${camera}.`;
        break;
      case 'stream':
        newMessage = `Iniciando transmissão da Câmera ${camera}.`;
        setActiveCamera(camera); // Define a câmera ativa para mostrar no feed
        break;
      default:
        newMessage = `Ação desconhecida para a Câmera ${camera}.`;
        break;
    }
    setMessage(newMessage);
    // Remove a mensagem após 3 segundos
    setTimeout(() => setMessage(''), 3000);
  };

  return (
    <div className="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4">
      <div className="container mx-auto p-8 bg-gray-800 rounded-2xl shadow-lg border border-gray-700">
        <header className="text-center mb-10">
          <h1 className="text-4xl font-bold text-teal-400">Gerenciador de Câmeras</h1>
          <p className="mt-2 text-gray-400">Monitore sua segurança de qualquer lugar.</p>
        </header>

        <main>
          {/* Seção de exibição do vídeo */}
          <section className="mb-8">
            <div id="camera-feed" className="w-full h-80 bg-black rounded-xl border-2 border-gray-700 flex items-center justify-center text-gray-500 text-lg">
              {activeCamera ? (
                <span>Transmissão da Câmera {activeCamera}</span>
              ) : (
                <span>Área para o vídeo da câmera</span>
              )}
            </div>
          </section>

          {/* Seção de controles das câmeras */}
          <section>
            <h2 className="text-2xl font-semibold mb-4 text-teal-300">Controles das Câmeras</h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
              
              {/* Cartão da Câmera 1 */}
              <div className="camera-card bg-gray-700 p-6 rounded-xl shadow-md transition-all duration-300 hover:scale-105">
                <h3 className="text-xl font-bold mb-2">Câmera 1</h3>
                <p className="text-sm text-gray-400 mb-4">Bairro São Cristóvão</p>
                <div className="flex flex-col space-y-2">
                  <button className="control-button bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" onClick={() => handleCameraAction(1, 'toggle')}>Ligar/Desligar</button>
                  <button className="control-button bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50" onClick={() => handleCameraAction(1, 'record')}>Gravar</button>
                  <button className="control-button bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50" onClick={() => handleCameraAction(1, 'stream')}>Transmissão</button>
                </div>
              </div>

              {/* Cartão da Câmera 2 */}
              <div className="camera-card bg-gray-700 p-6 rounded-xl shadow-md transition-all duration-300 hover:scale-105">
                <h3 className="text-xl font-bold mb-2">Câmera 2</h3>
                <p className="text-sm text-gray-400 mb-4">Posto Roso</p>
                <div className="flex flex-col space-y-2">
                  <button className="control-button bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" onClick={() => handleCameraAction(2, 'toggle')}>Ligar/Desligar</button>
                  <button className="control-button bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50" onClick={() => handleCameraAction(2, 'record')}>Gravar</button>
                  <button className="control-button bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50" onClick={() => handleCameraAction(2, 'stream')}>Transmissão</button>
                </div>
              </div>

              {/* Cartão da Câmera 3 */}
              <div className="camera-card bg-gray-700 p-6 rounded-xl shadow-md transition-all duration-300 hover:scale-105">
                <h3 className="text-xl font-bold mb-2">Câmera 3</h3>
                <p className="text-sm text-gray-400 mb-4">Bairro São josé</p>
                <div className="flex flex-col space-y-2">
                  <button className="control-button bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" onClick={() => handleCameraAction(3, 'toggle')}>Ligar/Desligar</button>
                  <button className="control-button bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50" onClick={() => handleCameraAction(3, 'record')}>Gravar</button>
                  <button className="control-button bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50" onClick={() => handleCameraAction(3, 'stream')}>Transmissão</button>
                </div>
              </div>

            </div>
          </section>
        </main>

        <footer className="mt-10 text-center text-gray-500 text-sm">
          <p>&copy; 2024 Gerenciador de Câmeras de Segurança. Todos os direitos reservados.</p>
        </footer>

        {/* Exibe a mensagem temporária se houver uma */}
        {message && (
          <div className="fixed bottom-4 left-1/2 -translate-x-1/2 bg-gray-700 text-white px-6 py-3 rounded-xl shadow-lg transition-opacity duration-500 ease-in-out opacity-100 z-50">
            {message}
          </div>
        )}
      </div>
    </div>
  );
};

// As linhas de importação e renderização explícita do ReactDOM foram removidas daqui.
// O ambiente espera que o componente seja exportado por padrão para renderizá-lo.

export default App;
